<!DOCTYPE html>
<html>
  <head>
    <title>Moscow Time</title>
  </head>
  <body>
    <h1>Current Time in Moscow:</h1>
    <p id="current-time">{{ time }}</p>
    <p id="visits">0</p>

    <script>
      function updateTime() {
        fetch("/time", {
          method: "GET",
        }).then(async (data) => {
          const timeElement = document.getElementById("current-time");
          const timeData = await data.text();

          timeElement.innerText = timeData;
        });
      }

      function updateVisits() {
        fetch("/visits", {
          method: "GET",
        }).then(async (data) => {
          const visitsElement = document.getElementById("visits");
          const visitsData = await data.text();

          visitsElement.innerText = visitsData;
        });
      }

      setInterval(updateTime, 1000);
      setInterval(updateVisits, 1000);

      updateTime();
      updateVisits();
    </script>
  </body>
</html>
